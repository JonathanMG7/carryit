{% extends "base.html" %}
{% load bootstrap %}

{%block title%}Lista Solicitudes{%endblock%}

{% block importaciones %}
{%endblock%}

{%block css%}
  <style type="text/css">
    .form-control{
      width: 90%;
    }
  </style>
{%endblock%}


{%block content%}
    <div id="dialog">
    </div>
    <div class="container">
      <div class="jumbotron">
        <p class="centerButtons">
          Lista de solicitudes
        </p>
          <table id="table" >
            <thead>
              <tr>
                  <th># Gu√≠a</th>
                  <th>Cliente</th>
                  <th>Estado</th>
              </tr>
            </thead>
          </table>
      </div>  
    </div>
{%endblock%}

{%block js%}
  <script>
    $(document).ready(function() {
           $('#table').dataTable( {
               "processing": true,
               "ajax": {
                   "processing": true,
                   "url": "{% url 'solicitudes:listas' %}",
               },
               "columnDefs": [
            {
                // The `data` parameter refers to the data for the cell (defined by the
                // `data` option, which defaults to the column being worked with, in
                // this case `data: 0`.
                "render": function ( data, type, row ) {
                    return data + '   ' +'<button type="button" class="btn btn-default btn-right" onClick="takeData(this)">Tomar</button>'
                },
                "targets": 1
            },
                        // { "visible": false,  "targets": [ 2 ] }
        ],
               "columns": [
                       { "data": "guia" },
                       // { "data": "nom_cliente" },
                       { "data": "estado" }

                   ]
           } );
       } );

      function takeData(dato) {
        var Dato = $(dato).parent().parent().find(".sorting_1").html(); 
        $("#dialog").html( "Buenos dias " + Dato + " Esta solicitud sera tramitada por: " + {{ request.user.pk }} );
        }
    </script>

  <script>
    window.onload = function() {
      document.getElementById('lsol').className = 'active';
    };
  </script>

{%endblock%}